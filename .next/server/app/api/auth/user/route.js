(()=>{var e={};e.id=414,e.ids=[414],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13097:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>l,serverHooks:()=>h,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>d,dynamic:()=>c,runtime:()=>p});var a=r(43007),n=r(44360),u=r(98343),i=r(28142),o=r(21254);let c="force-dynamic",p="nodejs";async function d(e){try{let e=await (0,o.th)();if(!e)return i.NextResponse.json({success:!1,message:"Not authenticated"},{status:401});return i.NextResponse.json({success:!0,user:{id:e.id,email:e.email,name:e.name,role:e.role}})}catch(e){return console.error("Get user error:",e),i.NextResponse.json({success:!1,message:"An error occurred while fetching user data"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/auth/user/route",pathname:"/api/auth/user",filename:"route",bundlePath:"app/api/auth/user/route"},resolvedPagePath:"D:\\leadcloser\\leadcloser\\src\\app\\api\\auth\\user\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:x,workUnitAsyncStorage:m,serverHooks:h}=l;function y(){return(0,u.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:m})}},21254:(e,t,r)=>{"use strict";r.d(t,{CF:()=>c,Er:()=>o,Ey:()=>p,VX:()=>l,th:()=>x});var s=r(80178),a=r(48361),n=r(53943);r(28142);var u=r(42687);let i=new TextEncoder().encode(process.env.JWT_SECRET||"leadcloser-default-secret-key-change-in-production");async function o(e){return await (0,u.hash)(e,10)}async function c(e,t){return await (0,u.verify)(e,t)}async function p(e){return await new s.P({id:e.id,email:e.email,name:e.name,role:e.role}).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime("7d").sign(i)}async function d(e){try{let{payload:t}=await (0,a.V)(e,i);return t}catch(e){return null}}function l(e,t){e.cookies.set({name:"auth-token",value:t,httpOnly:!0,secure:!0,sameSite:"strict",maxAge:604800,path:"/"})}async function x(){let e=(0,n.UL)(),t=e.get("auth-token")?.value;return t?await d(t):null}},24467:()=>{},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},42687:e=>{"use strict";e.exports=require("@node-rs/bcrypt")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},61419:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[535,38,956],()=>r(13097));module.exports=s})();